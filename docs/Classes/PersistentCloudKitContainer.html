<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
 
    <link rel="stylesheet" href="../css/fw2020.css">
    
    <title>PersistentCloudKitContainer Class Reference</title>
    
  </head>
  <body data-root-path="./../">

  <header class="j2-header">
  <div class="navbar navbar-expand navbar-dark j2-titlebar">
    <a class="sr-only-focusable sr-only font-weight-slightly-bold pr-2" href="#main-content">Skip to main content</a>
    <a class="nav-item nav-link pl-0 pt-1 pr-2 d-md-none" id="nav-toggle-button" role="button" aria-controls="nav-column" aria-expanded="false" aria-label="Toggle navigation" href="#">
      <span class="navbar-toggler-icon"></span>
    </a>
  
    <div style="align-items-baseline">
      <div class="navbar-brand mr-1 font-weight-slightly-bold">
        <a href="../index.html">TMLPersistentContainer 5.0.0</a>
      </div>
      <span class="navbar-text j2-coverage font-weight-slightly-bold small d-none d-lg-inline-block mr-2">(100% documented)</span>
    </div>
  
    <div class="navbar-nav ml-auto justify-content-end flex-fill">
  
      <form class="form-inline d-none d-md-flex" role="search">
        <input class="form-control form-control-sm w-100" type="search" placeHolder="Search" aria-label="Search" aria-keyshortcuts="/" data-search-format="span">
      </form>
  
      <a class="nav-item nav-link d-none d-sm-inline" rel="external" href="https://github.com/johnfairh/TMLPersistentContainer">
        <svg class="j2-title-svg" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 16 16"><title>Open on GitHub</title><path fill="currentcolor" fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
        </svg>
      </a>
  
    </div>
  </div>
  
  <!-- narrow-style searchbar -->
  
  <div class="container-fluid j2-titlebar d-md-none">
    <div class="row">
      <div class="col">
        <form class="pb-2">
          <input class="form-control form-control-sm" type="search" placeHolder="Search" aria-label="Search" aria-keyshortcuts="/" data-search-format="div">
        </form>
      </div>
    </div>
  </div>

  <!-- breadcrumb bar, jazzy doesn't really support -->

  <nav aria-label="breadcrumb" class="small">
    <ol class="breadcrumb j2-breadcrumb">
      <li class="breadcrumb-item"><a href="../index.html">TMLPersistentContainer Reference</a></li>
      <li class="breadcrumb-item" aria-current="page">PersistentCloudKitContainer Class Reference</li>
    </ol>
  </nav>

  </header>

  <div class="container-fluid">
    <div class="row">
      <div class="col-auto d-none d-md-flex flex-column j2-nav" id="nav-column">
        <nav aria-label="swift" class="j2-swift">
          <ul class="j2-nav-list">
            <li class="j2-nav-group">
              <a class="j2-nav-item" href="../Guides.html">Guides</a>
              <ul class="j2-nav-sublist">
                <li>
                  <a class="j2-nav-item" href="../background.html">Background</a>
                </li>
                <li>
                  <a class="j2-nav-item" href="../usage.html">Usage</a>
                </li>
              </ul>
            </li>
            <li class="j2-nav-group">
              <a class="j2-nav-item" href="../Main%20APIs.html">Main APIs</a>
              <ul class="j2-nav-sublist">
                <li>
                  <a class="j2-nav-item" href="../Classes/PersistentContainer.html">PersistentContainer</a>
                </li>
                <li>
                  <a class="j2-nav-item" href="../Classes/PersistentCloudKitContainer.html">PersistentCloudKitContainer</a>
                </li>
                <li>
                  <a class="j2-nav-item" href="../Enums/ModelVersionOrder.html">ModelVersionOrder</a>
                </li>
                <li>
                  <a class="j2-nav-item" href="../Enums/MigrationError.html">MigrationError</a>
                </li>
                <li>
                  <a class="j2-nav-item" href="../Protocols/MigrationDelegate.html">MigrationDelegate</a>
                </li>
              </ul>
            </li>
            <li class="j2-nav-group">
              <a class="j2-nav-item" href="../Logging%20APIs.html">Logging APIs</a>
              <ul class="j2-nav-sublist">
                <li>
                  <a class="j2-nav-item" href="../Structs/LogMessage.html">LogMessage</a>
                </li>
                <li>
                  <a class="j2-nav-item" href="../Enums/LogLevel.html">LogLevel</a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>
      </div>
      <main class="col col-xl-8 j2-article px-lg-4 px-xl-5" id="article-column">
        <article class="j2-article-wrapper" id="main-content">

        <!-- todo top of article.... -->

        <section>
          <header>
            <h1 class="j2-anchor">
              <span>PersistentCloudKitContainer</span>
            </h1>
          </header>
          <div class="j2-callout j2-callout-declaration">
            <div class="j2-callout-title" role="heading" aria-level="5">Swift?</div>
            <pre><code class="language-swift">@available(OSX 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
open class PersistentCloudKitContainer : <a href="https://developer.apple.com/documentation/coredata/nspersistentcloudkitcontainer/">NSPersistentCloudKitContainer</a>, PersistentContainerMigratable, PersistentContainerProtocol, LogMessageEmitter</code></pre>
          </div>

          <div class="clearfix">
            <p>A container for a Core Data stack that provides automatic multi-step shortest-path
persistent store migration, capable of managing both CloudKit-backed and non-cloud stores.</p>

<p>This is a drop-in replacement for <code><a href="https://developer.apple.com/documentation/coredata/nspersistentcloudkitcontainer/">NSPersistentCloudKitContainer</a></code> that
automatically detects and performs multi-step store migration as part of the
<code>loadPersistentStores</code> method.</p>

<p>The container searches for models and mapping models, then constructs the
best sequence in which to migrate stores. It prefers to use explicit mapping models
over inferred mapping models when there is a choice. Progress and status can be
reported back to the client code.</p>

<p>See <a href="https://johnfairh.github.io/TMLPersistentContainer/usage.html">the user guide</a> for more details.</p>

<p>See <code><a href="../Classes/PersistentContainer.html">PersistentContainer</a></code> for a version that does not support CloudKit-backed stores.</p>

          </div>
        </section>

        <hr/>
        <section>
          <h1 class="sr-only">Topics</h1>
          <section>
            <section id="s22TMLPersistentContainer018PersistentCloudKitB0C17migrationDelegateAA09MigrationG0_pSgvp" class="j2-item">
              <a name="//apple_ref/cpp/Property/migrationDelegate" class="dashAnchor"></a>
              <h4 class="sr-only">migrationDelegate</h4>
              <a class="j2-item-title" data-toggle="collapse" href="#_s22TMLPersistentContainer018PersistentCloudKitB0C17migrationDelegateAA09MigrationG0_pSgvp" role="button" aria-expanded="false" aria-controls="_s22TMLPersistentContainer018PersistentCloudKitB0C17migrationDelegateAA09MigrationG0_pSgvp"><code>migrationDelegate</code></a>
              <div class="collapse j2-item-popopen-wrapper" id="_s22TMLPersistentContainer018PersistentCloudKitB0C17migrationDelegateAA09MigrationG0_pSgvp">
                <div class="j2-item-popopen">
                  <div class="j2-item-popopen-pointer" role="none"></div>
                  <div class="j2-item-popopen-body">
                    <div class="clearfix">
                      <p>Optional delegate to receive migration progress notifications.</p>

                    </div>
                    <h5>Declaration</h5>
                    <div class="j2-item-declaration">
                    <div class="j2-callout-title" role="heading" aria-level="6">Swift</div>
                    <pre><code class="language-swift">public weak var migrationDelegate: <a href="../Protocols/MigrationDelegate.html">MigrationDelegate</a>?</code></pre>
                    </div>
                    <nav class="j2-item-nav" aria-label="item details">
                      <span class="j2-item-nav-item"><a href="https://github.com/johnfairh/TMLPersistentContainer/tree/master/Sources/PersistentCloudKitContainer.swift#L43">Show on GitHub</a></span>
                    </nav>
                  </div>
                <div>
              </div>
            </section>
            <section id="s22TMLPersistentContainer018PersistentCloudKitB0C4name7bundles17modelVersionOrder17logMessageHandlerACSS_SaySo8NSBundleCGAA05ModeliJ0OyAA03LogL0VcSgtcfc" class="j2-item">
              <a name="//apple_ref/cpp/Method/init(name:bundles:modelVersionOrder:logMessageHandler:)" class="dashAnchor"></a>
              <h4 class="sr-only">init(name:bundles:modelVersionOrder:logMessageHandler:)</h4>
              <a class="j2-item-title" data-toggle="collapse" href="#_s22TMLPersistentContainer018PersistentCloudKitB0C4name7bundles17modelVersionOrder17logMessageHandlerACSS_SaySo8NSBundleCGAA05ModeliJ0OyAA03LogL0VcSgtcfc" role="button" aria-expanded="false" aria-controls="_s22TMLPersistentContainer018PersistentCloudKitB0C4name7bundles17modelVersionOrder17logMessageHandlerACSS_SaySo8NSBundleCGAA05ModeliJ0OyAA03LogL0VcSgtcfc"><code>init(name:<wbr>bundles:<wbr>modelVersionOrder:<wbr>logMessageHandler:<wbr>)</code></a>
              <div class="collapse j2-item-popopen-wrapper" id="_s22TMLPersistentContainer018PersistentCloudKitB0C4name7bundles17modelVersionOrder17logMessageHandlerACSS_SaySo8NSBundleCGAA05ModeliJ0OyAA03LogL0VcSgtcfc">
                <div class="j2-item-popopen">
                  <div class="j2-item-popopen-pointer" role="none"></div>
                  <div class="j2-item-popopen-body">
                    <div class="clearfix">
                      <p>Initializes a persistent container from a named model.</p>

                    </div>
                    <h5>Declaration</h5>
                    <div class="j2-item-declaration">
                    <div class="j2-callout-title" role="heading" aria-level="6">Swift</div>
                    <pre><code class="language-swift">public convenience init(name: <a href="https://developer.apple.com/documentation/swift/string/">String</a>,
                        bundles: [<a href="https://developer.apple.com/documentation/foundation/bundle/">Bundle</a>] = [<a href="https://developer.apple.com/documentation/foundation/bundle/">Bundle</a>.main],
                        modelVersionOrder: <a href="../Enums/ModelVersionOrder.html">ModelVersionOrder</a> = .compare,
                        logMessageHandler: <a href="../Structs/LogMessage.html">LogMessage</a>.Handler? = nil)</code></pre>
                    </div>
                    <h5>Parameters</h5>
                    <table class="j2-param-table">
                      <tbody>
                       <tr>
                         <td>
                           <code>
                           name
                           </code>
                         </td>
                         <td>
                           <div>
                             <p>The name of the managed object model to use with the container.
  This name is used as the default name for the first persistent store.</p>
                           </div>
                         </td>
                       </tr>
                       <tr>
                         <td>
                           <code>
                           bundles
                           </code>
                         </td>
                         <td>
                           <div>
                             <p>An array of bundles to search for the container&rsquo;s model. By default
     only the app&rsquo;s main bundle. If the model exists in multiple bundles then
     the first one in the array is used. If the model exists more than once
     in the same bundle then it is undefined which is used. These bundles are
     also used to search for data and mapping models during automatic multi-step
     store migration.</p>
                           </div>
                         </td>
                       </tr>
                       <tr>
                         <td>
                           <code>
                           modelVersionOrder
                           </code>
                         </td>
                         <td>
                           <div>
                             <p>The ordering algorithm of model versions used to guide automatic
               multi-step store migration. The default is a numeric string
               comparison, meaning that <code>MyModel1</code> precedes <code>MyModel2</code> precedes
               <code>MyModel10</code>.</p>
                           </div>
                         </td>
                       </tr>
                       <tr>
                         <td>
                           <code>
                           logMessageHandler
                           </code>
                         </td>
                         <td>
                           <div>
                             <p>A callback to receive log messages from the library suitable for
               helping debug applications. Calls can occur on any queue.
               The default performs no logging.</p>
                           </div>
                         </td>
                       </tr>
                      </tbody>
                    </table>
                    <nav class="j2-item-nav" aria-label="item details">
                      <span class="j2-item-nav-item"><a href="https://github.com/johnfairh/TMLPersistentContainer/tree/master/Sources/PersistentCloudKitContainer.swift#L69-L88">Show on GitHub</a></span>
                    </nav>
                  </div>
                <div>
              </div>
            </section>
            <section id="s22TMLPersistentContainer018PersistentCloudKitB0C4name18managedObjectModel7bundles17modelVersionOrder17logMessageHandlerACSS_So09NSManagedhI0CSaySo8NSBundleCGAA0ilM0OyAA03LogO0VcSgtcfc" class="j2-item">
              <a name="//apple_ref/cpp/Method/init(name:managedObjectModel:bundles:modelVersionOrder:logMessageHandler:)" class="dashAnchor"></a>
              <h4 class="sr-only">init(name:managedObjectModel:bundles:modelVersionOrder:logMessageHandler:)</h4>
              <a class="j2-item-title" data-toggle="collapse" href="#_s22TMLPersistentContainer018PersistentCloudKitB0C4name18managedObjectModel7bundles17modelVersionOrder17logMessageHandlerACSS_So09NSManagedhI0CSaySo8NSBundleCGAA0ilM0OyAA03LogO0VcSgtcfc" role="button" aria-expanded="false" aria-controls="_s22TMLPersistentContainer018PersistentCloudKitB0C4name18managedObjectModel7bundles17modelVersionOrder17logMessageHandlerACSS_So09NSManagedhI0CSaySo8NSBundleCGAA0ilM0OyAA03LogO0VcSgtcfc"><code>init(name:<wbr>managedObjectModel:<wbr>bundles:<wbr>modelVersionOrder:<wbr>logMessageHandler:<wbr>)</code></a>
              <div class="collapse j2-item-popopen-wrapper" id="_s22TMLPersistentContainer018PersistentCloudKitB0C4name18managedObjectModel7bundles17modelVersionOrder17logMessageHandlerACSS_So09NSManagedhI0CSaySo8NSBundleCGAA0ilM0OyAA03LogO0VcSgtcfc">
                <div class="j2-item-popopen">
                  <div class="j2-item-popopen-pointer" role="none"></div>
                  <div class="j2-item-popopen-body">
                    <div class="clearfix">
                      <p>Initializes a persistent container using a managed object model.</p>

                    </div>
                    <h5>Declaration</h5>
                    <div class="j2-item-declaration">
                    <div class="j2-callout-title" role="heading" aria-level="6">Swift</div>
                    <pre><code class="language-swift">public init(name: <a href="https://developer.apple.com/documentation/swift/string/">String</a>,
            managedObjectModel model: <a href="https://developer.apple.com/documentation/coredata/nsmanagedobjectmodel/">NSManagedObjectModel</a>,
            bundles: [<a href="https://developer.apple.com/documentation/foundation/bundle/">Bundle</a>] = [<a href="https://developer.apple.com/documentation/foundation/bundle/">Bundle</a>.main],
            modelVersionOrder: <a href="../Enums/ModelVersionOrder.html">ModelVersionOrder</a> = .compare,
            logMessageHandler: <a href="../Structs/LogMessage.html">LogMessage</a>.Handler?)</code></pre>
                    </div>
                    <h5>Parameters</h5>
                    <table class="j2-param-table">
                      <tbody>
                       <tr>
                         <td>
                           <code>
                           name
                           </code>
                         </td>
                         <td>
                           <div>
                             <p>The defaut name for the first persistent store.</p>
                           </div>
                         </td>
                       </tr>
                       <tr>
                         <td>
                           <code>
                           model
                           </code>
                         </td>
                         <td>
                           <div>
                             <p>The managed object model to be used by the persistent container.</p>
                           </div>
                         </td>
                       </tr>
                       <tr>
                         <td>
                           <code>
                           bundles
                           </code>
                         </td>
                         <td>
                           <div>
                             <p>An array of bundles used to search for data models and mapping models
     during automatic multi-step store migration.</p>
                           </div>
                         </td>
                       </tr>
                       <tr>
                         <td>
                           <code>
                           modelVersionOrder
                           </code>
                         </td>
                         <td>
                           <div>
                             <p>The ordering algorithm of model versions used to guide automatic
               multi-step store migration. The default is a numeric string
               comparison, meaning that <code>MyModel1</code> precedes <code>MyModel2</code> precedes
               <code>MyModel10</code>.</p>
                           </div>
                         </td>
                       </tr>
                       <tr>
                         <td>
                           <code>
                           logMessageHandler
                           </code>
                         </td>
                         <td>
                           <div>
                             <p>A callback to receive log messages from the library suitable for
               helping debug applications. Calls can occur on any queue.
               The default performs no logging.</p>
                           </div>
                         </td>
                       </tr>
                      </tbody>
                    </table>
                    <nav class="j2-item-nav" aria-label="item details">
                      <span class="j2-item-nav-item"><a href="https://github.com/johnfairh/TMLPersistentContainer/tree/master/Sources/PersistentCloudKitContainer.swift#L108-L117">Show on GitHub</a></span>
                    </nav>
                  </div>
                <div>
              </div>
            </section>
            <section id="cMTMLPersistentContainerobjccsPersistentCloudKitContainerimloadPersistentStoresWithCompletionHandler" class="j2-item">
              <a name="//apple_ref/cpp/Method/loadPersistentStores(completionHandler:)" class="dashAnchor"></a>
              <h4 class="sr-only">loadPersistentStores(completionHandler:)</h4>
              <a class="j2-item-title" data-toggle="collapse" href="#_cMTMLPersistentContainerobjccsPersistentCloudKitContainerimloadPersistentStoresWithCompletionHandler" role="button" aria-expanded="false" aria-controls="_cMTMLPersistentContainerobjccsPersistentCloudKitContainerimloadPersistentStoresWithCompletionHandler"><code>loadPersistentStores(completionHandler:<wbr>)</code></a>
              <div class="collapse j2-item-popopen-wrapper" id="_cMTMLPersistentContainerobjccsPersistentCloudKitContainerimloadPersistentStoresWithCompletionHandler">
                <div class="j2-item-popopen">
                  <div class="j2-item-popopen-pointer" role="none"></div>
                  <div class="j2-item-popopen-body">
                    <div class="clearfix">
                      <p>Begin loading and migrating the persistent stores mentioned in <code>persistentStoreDescriptions</code> that have
not already been loaded. The completion handler is called once for each such store on the main queue
indicating whether the store has been loaded successfully.</p>

<p>If the store description has <code>shouldMigrateStoreAutomatically</code> set then the container automatically
attempts multi-step migration.  If the store description also has <code>shouldInferMappingModelAutomatically</code>
set then the multi-step migration can include the use of inferred mapping models and light-weight
migration.  Once any multi-step migration is complete, Core Data is invoked to load the store and set
up the stack for use.</p>

<p>These flags are both on by default.</p>

<p>If <em>any</em> of the store descriptions have <code>shouldAddStoreAsynchronously</code> set then this routine returns
immediately and <em>all</em> migrations occur on a background queue.  This flag is off by default.</p>

<p>If the container has multiple stores then the container tries very hard to ensure either all stores
are migrated successfully or none are.</p>

                    </div>
                    <h5>Declaration</h5>
                    <div class="j2-item-declaration">
                    <div class="j2-callout-title" role="heading" aria-level="6">Swift</div>
                    <pre><code class="language-swift">open override func loadPersistentStores(completionHandler block: @escaping (<a href="https://developer.apple.com/documentation/coredata/nspersistentstoredescription/">NSPersistentStoreDescription</a>, <a href="https://developer.apple.com/documentation/accelerate/quadrature/error/">Error</a>?) -&gt; ())</code></pre>
                    </div>
                    <h5>Parameters</h5>
                    <table class="j2-param-table">
                      <tbody>
                       <tr>
                         <td>
                           <code>
                           block
                           </code>
                         </td>
                         <td>
                           <div>
                             <p>Callback made on the main queue for each store when it has either been loaded successfully
               or failed to load.  The <code><a href="https://developer.apple.com/documentation/accelerate/quadrature/error/">Error</a></code> here can be anything provided by
               <code>NSPersistentContainer.loadPersistentStores</code> as well as anything from <code><a href="../Enums/MigrationError.html">MigrationError</a></code>
               in this package.</p>
                           </div>
                         </td>
                       </tr>
                      </tbody>
                    </table>
                    <nav class="j2-item-nav" aria-label="item details">
                      <span class="j2-item-nav-item"><a href="https://github.com/johnfairh/TMLPersistentContainer/tree/master/Sources/PersistentCloudKitContainer.swift#L142-L148">Show on GitHub</a></span>
                    </nav>
                  </div>
                <div>
              </div>
            </section>
          </section>
        </section>

        </article>
      </main>

      <!-- aux nav -->

      <div class="col-xl d-none d-xl-block j2-aux-nav" id="aux-nav-column">
        <div class="j2-aux-nav-wrapper">
          <h6 class="j2-inline-heading">Topics</h6>
          <nav aria-label="page">
            <ul class="j2-aux-group">
              <li><a href="#">Declaration</a></li>
            </ul>
          </nav>
          <h6 class="j2-inline-heading">Actions</h6>
          <ul class="j2-aux-group">
            <li><a class="j2-aux-action" id="action-search" href="#" role="button" aria-keyshortcuts="/">Search (/)</a></li>
            <li><a class="j2-aux-action" id="action-collapse" href="#" role="button" aria-keyshortcuts="a">
              <span id="action-collapse-expand">Open all (a)</span>
              <span id="action-collapse-collapse" class="d-none">Close all (a)</span>
            </a></li>
          </ul>
        </div>
      </div>

    </div> <!-- end row -->

    <footer class="row">
      <div class="col j2-footer small pt-2">
        <p><p>Distributed under the ISC license.  Maintained by John Fairhurst.</p></p>
        <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.1</a>-<a class="link" href="https://github.com/johnfairh/jazzy" target="_blank" rel="external">bebop</a>, originally a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.  Theme from <a href="https://github.com/johnfairh/J2">J2</a>.</p>
      </div>
    </footer>
  </div> <!-- container -->

  <script src="../js/dependencies.min.js"></script>
  <script src="../js/fw2020.js"></script>
  </body>

</html>
